@using TicketMonster.ApplicationCore.Services.User;
@using TicketMonster.Web.Services;
@inject UserService _user
@inject UserManager _userManger
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - TicketMonster</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caprasimo&display=swap" rel="stylesheet">
    <link href="~/lib/font-awesome/css/all.css" rel="stylesheet" />
    <link href="~/lib/font-awesome/css/all.min.css" rel="stylesheet" />
    <script src="~/lib/jquery/jquery.min.js"></script>
    <link href="~/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/lib/animate.css/animate.min.css" rel="stylesheet" />
    <link href="~/lib/toastr.js/toastr.min.css" rel="stylesheet" />
    <link href="~/lib/owlcarousel2/assets/owl.carousel.min.css" rel="stylesheet" />

    <link href="~/css/_layout.css" rel="stylesheet" asp-append-version="true" />
    @if (ViewBag.Footer == true) { <link href="~/css/site.css" rel="stylesheet" /> }

    @await RenderSectionAsync("topCSS", required: false)
    @await RenderSectionAsync("topJS", required: false)
    @{
        var currentUser = await _user.GetCustomerInfo(_userManger.GetCurrentUserId());
        ViewBag.currentUserName = currentUser?.LastName;
    }
</head>

<body>
    @if (ViewBag.Navbar == true)
    {
        <nav class="navbar navbar-expand-lg bg-body-tertiary" data-bs-theme="dark">
            <div class="container-fluid">
                <a class="navbar-brand" asp-controller="HomePage" asp-action="HomePageView">TicketMonster</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                        aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <form class="d-flex input-group pr-5" action="~/Search" method="get">
                            <input id="keyword" name="keyword" class="form-control me-2" type="search" placeholder="Search Events" aria-label="Search">
                        </form>
                        <li class="nav-item ">
                            <a class="nav-link" href="~/Category/1">Conecerts</a>
                        </li>
                        <li class="nav-itemms-auto">
                            <a class="nav-link" href="~/Category/2">Sports</a>
                        </li>
                        <li class="nav-itemms-auto">
                            <a class="nav-link" href="~/Category/3">Movie</a>
                        </li>
                  @*       <li class="nav-itemms-auto">
                            <a class="nav-link" href="~/CreateEvent/Create">CreateEvent</a>
                        </li> *@
                    </ul>
                    <ul class="navbar-nav ml-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="#">Help</a>
                        </li>
                        <li class="nav-item dropdown" id="account">
                            @if (_userManger.IsLoggingIn()) { @await Html.PartialAsync("_LoggingInPartial") }
                            else { <a asp-controller="Access" asp-action="SignIn" class="nav-link">Sign In</a> }
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    }

    @await RenderSectionAsync("header", required: false)
    @await RenderSectionAsync("searchbox", required: false )

    <div class="container">
        <main role="main">
            @RenderBody()
        </main>
    </div>

    @if (ViewBag.Footer == true)
    {
        <div class="partialbackground partialfooter">
            <!-- footer list -->
            <div class="container mt-5">
                <div class="row mx-auto">
                    <div class="col-3">
                        <ul class="list-unstyled">
                            <li>Helpful Links</li>
                            <li>Help/FAQ</li>
                            <li>My Account</li>
                            <li>Contact Us</li>
                            <li>Gift Cards</li>
                            <li>Refunds and Exchanges</li>
                            <li>Do Not Sell or Share My Personal Information</li>
                        </ul>
                    </div>
                    <div class="col-3">
                        <ul class="list-unstyled">
                            <li>Our Network</li>
                            <li> Live Nation</li>
                            <li>House of Blues</li>
                            <li>Front Gate Tickets</li>
                            <li>TicketWeb</li>
                            <li>NFL</li>
                            <li>NBA</li>
                            <li>NHL </li>
                        </ul>
                    </div>
                    <div class="col-3">
                        <ul class="list-unstyled">
                            <li>About Us</li>
                            <li>Who We Are</li>
                            <li>Ticketing Truths</li>
                            <li>Privacy Policy</li>
                            <li>Ad Choices</li>
                            <li>Careers</li>
                            <li>Ticket Your Event</li>
                            <li>Innovation</li>
                        </ul>
                    </div>
                    <div class="col-3">
                        <ul class="list-unstyled">
                            <li>Friends & Partners</li>
                            <li>PayPal</li>
                            <li>Allianz</li>
                            <li>AWS</li>
                            <li>Get Our App</li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- footer list -->
            <!-- footer span -->
            <div class="container mt-3">
                <div class="row col-12 mx-auto justify-content-between partialfootertext">
                    <div class="partialfootermark">
                        Ticketmonter
                    </div>
                    <div class="partialfooterspan text-center">
                        <p class="d-inline"> By continuing past this page, you agree to our </p>
                        <a class="fw-bolder" href="#">
                            Terms of
                            Use.
                        </a>
                    </div>
                    <div class="text-center">
                        <a class="fw-bolder" href="#">Privacy Policy</a>
                        <p class="d-inline "> © 1999-2023 Ticketmnster. All rights reserved.</p>
                    </div>
                    <div class="mb-3">
                        <a class="justify-content-center d-flex fw-bolder" href="#">
                            Do Not Sell or Share My Personal Information
                        </a>
                    </div>
                    <div class="row col-3 mx-auto d-flex">
                        <div class="fa-solid fa-earth-asia">
                            Tawian
                        </div>
                    </div>
                    <div class="partialfootericon col-md-10 mx-auto mb-3">
                        <i class="fa-brands fa-facebook-f me-3"></i>
                        <i class="fa-brands fa-instagram me-3"></i>
                        <i class="fa-brands fa-twitter me-3"></i>
                        <i class="fa-brands fa-youtube me-3"></i>
                        <i class="fa-brands fa-linkedin-in me-3"></i>
                    </div>
                </div>
            </div>
            <!-- footer span -->
        </div>
    }

    <script src="~/lib/axios/axios.min.js"></script>
    <script src="~/lib/vue/dist/vue.global.js"></script>
    <script src="~/lib/toastr.js/toastr.min.js"></script>
    <script src="~/lib/crypto-js/crypto-js.min.js"></script>
    <script src="~/lib/sweetalert2/dist/sweetalert2.all.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/lib/owlcarousel2/owl.carousel.min.js"></script>
    
    @await RenderSectionAsync("endCSS", required: false)
    @await RenderSectionAsync("endJS", required: false)

    <script src="~/swiper/swiper.js"></script>
</body>
</html>
